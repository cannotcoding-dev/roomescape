# RoomEscape - Product Requirements Document (PRD)

## 1. 제품 개요

### 1.1 제품명
**RoomEscape: The Night Shift Mystery**

### 1.2 제품 설명
직장 동료의 수상한 행동을 발견한 주인공이 야근 중 그의 비밀을 파헤치게 되는 스토리 기반 텍스트 방탈출 게임

### 1.3 핵심 가치 제안
- **몰입감 있는 스토리**: 단순한 퍼즐이 아닌 서사가 있는 미스터리
- **빠른 접근성**: 닉네임만으로 바로 플레이 가능
- **적절한 난이도**: 15분 내외의 부담 없는 플레이타임

## 2. 스토리 설정

### 2.1 배경 스토리
당신은 IT 회사에서 일하는 직장인입니다. 최근 동료 '김과장'의 행동이 이상했습니다. 
- 야근을 자주 하지만 실제 업무는 보이지 않음
- 컴퓨터 화면을 남들이 보지 못하게 숨김
- 이상한 전화 통화를 자주 함
- 금고에 뭔가를 숨겨놓는 것을 목격

오늘, 김과장이 급하게 나간 사이 그의 비밀을 파헤칠 기회가 생겼습니다. 
하지만 30분 후 김과장이 돌아올 예정이니, 그 전에 증거를 찾고 사무실을 빠져나가야 합니다.

### 2.2 플레이어 목표
- **1차 목표**: 김과장의 수상한 행동에 대한 증거 찾기
- **2차 목표**: 발견한 증거를 바탕으로 안전하게 사무실 탈출
- **히든 목표**: 더 큰 비밀 발견 (멀티 엔딩)

## 3. 게임 메커니즘

### 3.1 기본 시스템
- **플랫폼**: 웹 브라우저 (React + TypeScript)
- **인터페이스**: 텍스트 기반 + 선택지 시스템
- **저장**: LocalStorage (세션 기반, 중간 저장 없음)
- **플레이타임**: 10-20분 (평균 15분)

### 3.2 인터랙션 시스템

**시각적 인터페이스 기반**
```
┌─────────────────────────────────────┐
│ 김과장의 책상 - 야근 중인 사무실      │
├─────────────────────────────────────┤
│  [💻 컴퓨터]    [📞 전화기]         │
│     (꺼져있음)     (빨간불 깜빡임)      │
│                                     │
│  [📋 메모장]    [🌱 화분]           │
│     (열려있음)     (물이 마름)         │
│                                     │
│  [🗃️ 서랍]      [🚪 이동]          │
│     (잠겨있음)     (다른 곳으로)        │
└─────────────────────────────────────┘

상황: 김과장이 급하게 나간 지 5분 경과
시간: 25분 남음 ⏰

💭 생각: "컴퓨터가 꺼져있네... 전화기에 불이 깜빡이고 있다."
```

**컴퓨터 화면 시뮬레이션**
```
┌─────────────────────────────────────┐
│ Windows 10 - 김과장 (로그인 필요)    │
├─────────────────────────────────────┤
│                                     │
│         🔐 비밀번호 입력              │
│                                     │
│    [________________]               │
│                                     │
│         [ 로그인 ] [ 취소 ]          │
│                                     │
│  💡 힌트: 책상 주변을 살펴보세요       │
└─────────────────────────────────────┘
```

### 3.3 힌트 시스템
**컨텍스트 기반 힌트 (스토리 자연스럽게 통합)**

1. **관찰 힌트**: 특정 행동 시 자동으로 제공
   - "전화기 근처에 이상한 숫자가 적힌 포스트잇이 보입니다."

2. **생각 힌트**: 막혔을 때 "곰곰 생각해보기" 옵션
   - "김과장이 항상 화분에 물을 주던 모습이 떠오릅니다..."

3. **시간 압박 힌트**: 일정 시간 후 자동 제공
   - "김과장이 돌아오기까지 15분 남았습니다. 서두르세요!"

### 3.4 인벤토리 시스템
- **단순한 아이템 목록**: "가지고 있는 것들"
- **아이템 조합**: 열쇠 + 서랍 = 서랍 열기
- **스토리 연결**: 각 아이템에 발견 스토리 첨부

## 4. 게임 구조

### 4.1 지역 구성
```
사무실 Layout:
├── 김과장 책상 (시작 지점)
├── 공용 프린터 구역
├── 커피머신 구역  
├── 화장실
├── 회의실
├── 금고실
└── 출입구 (탈출 지점)
```

### 4.2 퍼즐 구성 (난이도: 쉬움)

#### 4.2.1 1단계: 컴퓨터 접근
- **목표**: 김과장 컴퓨터 비밀번호 찾기
- **힌트**: 책상 주변 관찰 → 가족사진 발견 → 생일 조합
- **해결**: 아내 생일 (0315) 입력

#### 4.2.2 2단계: 이메일 확인
- **발견**: 수상한 이메일 내용 ("물건은 평소 장소에")
- **단서**: 화분, 커피머신, 프린터 중 하나가 "평소 장소"

#### 4.2.3 3단계: 숨겨진 아이템 찾기
- **화분 조사**: 밑에 숨겨진 USB
- **USB 내용**: 금고 위치와 힌트

#### 4.2.4 4단계: 금고 열기
- **위치**: 회의실 뒤 숨겨진 금고
- **비밀번호**: 이메일 + 달력 + 전화번호 조합
- **발견**: 중요 문서들

#### 4.2.5 5단계: 탈출 결정
- **선택지**: 
  - A) 즉시 탈출 (안전한 엔딩)
  - B) 더 조사 (위험하지만 진실 발견)
  - C) 증거 남기고 탈출 (정의 엔딩)

### 4.3 멀티 엔딩

#### 엔딩 A: "안전한 선택"
김과장의 비밀을 일부 알았지만, 더 깊이 파지 않고 조용히 탈출.
"때로는 모르는 것이 약이다..."

#### 엔딩 B: "진실의 대가"  
모든 증거를 찾아 큰 비밀을 발견하지만, 위험에 노출됨.
"진실을 아는 것은 때로 무거운 짐이 된다..."

#### 엔딩 C: "정의의 실현"
적절한 증거를 확보하고 당국에 신고 후 안전하게 탈출.
"용기 있는 선택이 세상을 바꾼다."

#### 히든 엔딩: "공범"
특정 조건 만족 시, 김과장의 비밀에 동참하는 선택지 등장.
"때로는 함께하는 것이 답이다..."

## 5. 사용자 스토리

### 5.1 시작 단계
```
As a 플레이어
I want to 닉네임을 입력하고 바로 게임 시작
So that I can 복잡한 가입 과정 없이 빠르게 게임 경험

시나리오:
1. 사이트 접속
2. "야근 중인 당신의 이름을 입력하세요" 
3. 닉네임 입력 → 스토리 인트로 시작
4. "김과장의 수상한 행동을 목격한 [닉네임]..."
```

### 5.2 게임 진행
```
As a 플레이어  
I want to 스토리 맥락 안에서 자연스럽게 퍼즐 해결
So that I can 단순한 수수께끼가 아닌 몰입감 있는 경험

시나리오:
1. 스토리 설명 → 선택지 제시
2. 선택 → 결과 및 새로운 정보 제공
3. 자연스러운 힌트 → 다음 단계 진행
4. 스토리 진전 → 긴장감 유지
```

### 5.3 엔딩 단계
```
As a 플레이어
I want to 내 선택에 따른 의미 있는 엔딩 경험
So that I can 만족스러운 결말과 재플레이 동기 확보

시나리오:
1. 최종 선택지 제시
2. 선택에 따른 엔딩 분기
3. 엔딩 스토리 + 결과 설명
4. "다른 선택을 해보시겠습니까?" 재플레이 유도
```

## 6. 기술 명세

### 6.1 아키텍처
```
src/
├── components/
│   ├── GameScreen.tsx      # 메인 게임 화면
│   ├── StoryDisplay.tsx    # 스토리 텍스트 표시
│   ├── ChoiceButtons.tsx   # 선택지 버튼들
│   ├── Inventory.tsx       # 인벤토리 UI
│   └── EndingScreen.tsx    # 엔딩 화면
├── contexts/
│   └── GameContext.tsx     # 게임 상태 관리
├── data/
│   ├── story.ts           # 스토리 데이터
│   ├── puzzles.ts         # 퍼즐 데이터
│   └── endings.ts         # 엔딩 데이터
├── utils/
│   ├── gameLogic.ts       # 게임 로직
│   └── storage.ts         # 로컬 저장소
└── types/
    └── game.ts            # 타입 정의
```

### 6.2 데이터 구조
```typescript
interface GameState {
  playerName: string;
  currentLocation: string;
  inventory: Item[];
  flags: Record<string, boolean>;
  progress: number;
  timeRemaining: number;
}

interface StoryNode {
  id: string;
  title: string;
  description: string;
  choices: Choice[];
  requirements?: string[];
  effects?: GameEffect[];
}

interface Choice {
  text: string;
  nextNode: string;
  requirements?: string[];
  effects?: GameEffect[];
}
```

### 6.3 성능 요구사항
- **로딩 시간**: 3초 이내
- **반응 속도**: 선택지 클릭 시 즉시 반응
- **메모리 사용량**: 50MB 이하
- **브라우저 호환성**: Chrome, Firefox, Safari, Edge 최신 버전

## 7. 개발 일정

### 7.1 Week 1: 기본 구조
- [ ] 프로젝트 설정 (Vite + React + TypeScript)
- [ ] 기본 컴포넌트 구조 설계
- [ ] 게임 상태 관리 시스템
- [ ] 스토리 데이터 구조 정의

### 7.2 Week 2: 스토리 시스템
- [ ] 스토리 노드 시스템 구현
- [ ] 선택지 처리 로직
- [ ] 인벤토리 시스템
- [ ] 게임 플래그 관리

### 7.3 Week 3: 퍼즐 구현
- [ ] 5개 핵심 퍼즐 구현
- [ ] 힌트 시스템 개발
- [ ] 아이템 조합 로직
- [ ] 진행 상황 추적

### 7.4 Week 4: 콘텐츠 제작
- [ ] 모든 스토리 텍스트 작성
- [ ] 엔딩 시나리오 구현
- [ ] UI/UX 개선
- [ ] 사운드 효과 (선택사항)

### 7.5 Week 5: 테스트 & 완성
- [ ] 전체 게임 플로우 테스트
- [ ] 버그 수정 및 최적화
- [ ] 다양한 플레이 패턴 검증
- [ ] 성능 최적화

### 7.6 Week 6: 배포 & 마무리
- [ ] 프로덕션 빌드
- [ ] Vercel/Netlify 배포
- [ ] 최종 테스트
- [ ] 문서화 완료

## 8. 성공 지표

### 8.1 사용자 경험 지표
- **완료율**: 80% 이상의 플레이어가 최소 1개 엔딩 달성
- **재플레이율**: 50% 이상의 플레이어가 다른 엔딩 시도
- **평균 플레이 시간**: 12-18분 (목표: 15분)
- **이탈률**: 각 단계별 20% 이하

### 8.2 게임 품질 지표
- **힌트 사용률**: 60-80% (적절한 난이도 지표)
- **엔딩 분포**: 각 엔딩 최소 10% 이상 달성
- **스토리 몰입도**: 게임 중 이탈률 10% 이하
- **로딩 성능**: 3초 내 게임 시작

## 9. 위험 요소 및 대응

### 9.1 기술적 위험
- **위험**: 복잡한 스토리 분기로 인한 버그
- **대응**: 단순한 플래그 기반 시스템 사용

- **위험**: 모바일 호환성 문제
- **대응**: 반응형 디자인 우선 고려

### 9.2 콘텐츠 위험
- **위험**: 스토리 퀄리티 부족
- **대응**: 단순하지만 확실한 서사 구조

- **위험**: 난이도 조절 실패
- **대응**: 테스트 플레이 및 힌트 시스템 강화

### 9.3 사용자 경험 위험
- **위험**: 15분 플레이타임 초과
- **대응**: 각 단계별 시간 측정 및 조절

- **위험**: 재플레이 동기 부족
- **대응**: 의미 있는 엔딩 차별화

## 10. 추후 확장 계획

### 10.1 단기 확장 (3개월)
- 추가 시나리오 (다른 동료의 비밀)
- 달성도 시스템
- 사운드 효과 추가

### 10.2 장기 확장 (6개월)
- 모바일 앱 버전
- 멀티 엔딩 확장 (7-10개)
- 사용자 제작 스토리 도구